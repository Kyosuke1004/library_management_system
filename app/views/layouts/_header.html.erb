<nav class="navbar custom-navbar" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <%= link_to '図書管理システム', root_path, class: "navbar-item" %>
    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>
  <div id="navbarBasicExample" class="navbar-menu">
    <div class="navbar-start">
      <%= link_to '図書一覧', books_path, class: "navbar-item" %>
      <% if user_signed_in? %>
        <%= link_to '貸出履歴', user_loans_path(current_user), class: "navbar-item" %>
      <% end %>
      <% if user_signed_in? && current_user.admin? %>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link navbar-item">管理</a>
          <div class="navbar-dropdown">
            <%= link_to 'ユーザー一覧', users_path, class: "navbar-item" %>
          </div>
        </div>
      <% end %>
    </div>
    <div class="navbar-end">
      <% if user_signed_in? %>
        <div class="navbar-item no-hover is-hidden-mobile is-hidden-touch">
          こんにちは、<%= current_user.email %>さん
        </div>
        <%= link_to 'ログアウト', destroy_user_session_path, data: { turbo_method: :delete }, class: "navbar-item" %>
      <% else %>
        <%= link_to '会員登録', new_user_registration_path, class: "navbar-item" %>
        <%= link_to 'ログイン', new_user_session_path, class: "navbar-item" %>
      <% end %>
    </div>
  </div>
</nav>
<div class="container mt-4">
  <% flash.each do |type, message| %>
    <% bulma_type = case type
          when 'notice' then 'is-success'
          when 'alert' then 'is-danger'
          else 'is-info'
        end %>
    <div class="notification <%= bulma_type %>">
      <button class="delete" onclick="this.parentElement.style.display='none'"></button>
      <%= message %>
    </div>
  <% end %>
  <%= yield %>
</div>